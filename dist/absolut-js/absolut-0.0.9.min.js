/*! AbsolutJS 0.0.9 */var Absolut;!function(){var js;!function(){"use strict";js={not:function(a){return!a},isDefined:function(a){return void 0!==a},notDefined:function(a){return void 0===a},typeOf:function(a){return this.isFunction(a)?a.name||Function.name:a.constructor.name||Object.name},isType:function(a,b){return a instanceof b},empty:function(a){return 0===a.length},notEmpty:function(a){return 0!==a.length},isFunction:function(a){return"function"==typeof a},run:function(a){if(js.not(js.run._waiting)&&(js.run._waiting=[]),js.isFunction(a)&&js.run._waiting.push(a),js.not(js.run._firstCalled))return window.addEventListener("load",js.run),js.run._firstCalled=!0;if(js.not(document.body))return setTimeout(js.run,1);if(js.not(js.run._running)){js.run._running=js.run._waiting,js.run._waiting=[];for(var b in js.run._running)js.run._running[b]();js.run._running=void 0,js.notEmpty(js.run._waiting)&&js.run()}}}}();var win;!function(){win={width:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},height:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},size:function(){return{width:this.getWidth(),height:this.getHeight()}}}}();var ass;!function(){ass={isTrue:function(a,b){this.isFalse(!a,b)},isFalse:function(a,b){if(a)throw new Error(b)},isType:function(a,b){js.isType(b,Array)||(b=[b]);for(var c=js.typeOf(b[0]),d=js.isType(a,b[0]),e=1;e<b.length;e++)c+=" or "+js.typeOf(b[e]),d|=js.isType(a,b[e]);this.isTrue(d,"expected "+c+", but got "+js.typeOf(a))}}}();var elem;!function(){elem={isVisible:function(a){return"hidden"!==a.style.visibility},setVisible:function(a,b){a.style.visibility=b?"inherit":"hidden"},getX:function(a){return a.offsetLeft},setX:function(a,b){a.style.left=b},getY:function(a){return a.offsetTop},setY:function(a,b){a.style.top=b},getWidth:function(a){return a.offsetWidth},setWidth:function(a,b){a.style.width=b},getHeight:function(a){return a.offsetHeight},setHeight:function(a,b){a.style.height=b},absoluteLocation:function(a){var b=a.getBoundingClientRect();return{x:Math.abs(b.left),y:Math.abs(b.top)}}}}();var Class;!function(){var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(prop){function construct(){!initializing&&this.init&&this.init.apply(this,arguments)}var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(a,b){return function(){var c=this._super;this._super=_super[a];var d=b.apply(this,arguments);return this._super=c,d}}(name,prop[name]):prop[name];var Class;return eval("Class = function "+(prop.init&&prop.init.name?prop.init.name:"Class")+"() { construct.apply(this, arguments); };"),Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=arguments.callee,Class}}();var Point,Size;!function(){Point=Class.extend({init:function(a,b){this.x=a||0,this.y=b||0},toString:function(){return JSON.stringify(this)}}),Point.sum=function(a,b){return new Point(a.x+b.x,a.y+b.y)},Size=Class.extend({init:function(a,b){this.width=a||0,this.height=b||0},toString:function(){return JSON.stringify(this)}})}();var Component,Behavior,Panel,Button,View,MouseDown,MouseMove,MouseClick,MouseUp,MouseDrag,KeyDown,KeyUp,KeyPress;!function(){Component=Class.extend({init:function(a){ass.isType(a,HTMLElement),a.style.position="absolute",this._elem=a,this._mouse={},this._children=[],this._behaviors=[]},element:function(){return this._elem},_event:function(a,b){if(this._behaviors.length>0)for(var c in this._behaviors){var d=this._behaviors[c];d instanceof a&&d.action(b)}},_resize:function(a){if(this.isVisible()&&(this._event(WindowResize,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._resize(a)},_isPointed:function(a){var b=this.absoluteLocation(),c=b.x<=a.x&&a.x<=b.x+this.getWidth()&&b.y<=a.y&&a.y<=b.y+this.getHeight();return c},_mouseMove:function(a){if(this.isVisible()&&(this._isPointed(a.location)?(this._event(MouseMove,a),this._mouse.pressed&&(this._mouse.dragging=!0,this._event(MouseDrag,a))):this._mouse.dragging&&this._event(MouseDrag,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._mouseMove(a)},_mouseDown:function(a){if(this.isVisible()&&(this._isPointed(a.location)&&(this._mouse.pressed=!0,this._event(MouseDown,a)),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._mouseDown(a)},_mouseUp:function(a){if(this._releaseMouse(),this.isVisible()&&(this._isPointed(a.location)&&this._event(MouseUp,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._mouseUp(a)},_releaseMouse:function(){if(this._mouse.pressed=!1,this._mouse.dragging=!1,js.notEmpty(this._children))for(var a in this._children)this._children[a]._releaseMouse()},_mouseClick:function(a){if(this.isVisible()&&(this._isPointed(a.location)&&this._event(MouseClick,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._mouseClick(a)},_keyDown:function(a){if(this.isVisible()&&(this._event(KeyDown,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._keyDown(a)},_keyUp:function(a){if(this.isVisible()&&(this._event(KeyUp,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._keyUp(a)},_keyPress:function(a){if(this.isVisible()&&(this._event(KeyPress,a),js.notEmpty(this._children)))for(var b in this._children)this._children[b]._keyPress(a)},toString:function(){return this._elem.toString()},isVisible:function(){return js.notDefined(this._visible)?elem.isVisible(this._elem):this._visible},setVisible:function(a){js.isDefined(a)&&elem.setVisible(this._elem,this._visible=a)},visible:function(a){return js.notDefined(a)?this.isVisible():void this.setVisible(a)},location:function(){return js.empty(arguments)?this.getLocation():void this.setLocation.apply(this,arguments)},getLocation:function(){return new Point(this.getX(),this.getY())},setLocation:function(){switch(arguments.length){case 1:var a=arguments[0];this.setX(a.x),this.setY(a.y);break;case 2:this.setX(arguments[0]),this.setY(arguments[1])}},getX:function(){return js.notDefined(this._x)?elem.getX(this._elem):this._x},setX:function(a){js.isDefined(a)&&elem.setX(this._elem,this._x=a)},x:function(a){return js.notDefined(a)?this.getX():void this.setX(a)},getY:function(){return js.notDefined(this._y)?elem.getY(this._elem):this._y},setY:function(a){js.isDefined(a)&&elem.setY(this._elem,this._y=a)},y:function(a){return js.notDefined(a)?this.getY():void this.setY(a)},absoluteLocation:function(){return elem.absoluteLocation(this._elem)},getWidth:function(){return js.notDefined(this._width)?elem.getWidth(this._elem):this._width},setWidth:function(a){js.isDefined(a)&&elem.setWidth(this._elem,this._width=a)},width:function(a){return js.notDefined(a)?this.getWidth():void this.setWidth(a)},getHeight:function(){return js.notDefined(this._height)?elem.getHeight(this._elem):this._height},setHeight:function(a){js.isDefined(a)&&elem.setHeight(this._elem,this._height=a)},height:function(a){return js.notDefined(a)?this.getHeight():void this.setHeight(a)},size:function(){return js.empty(arguments)?this.getSize():void this.setSize.apply(this,arguments)},getSize:function(){return new Size(this.getWidth(),this.getHeight())},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},parent:function(){return this._parent},children:function(){return this._children},add:function(a){return ass.isType(a,[Component,Behavior]),a instanceof Component?(this._children.push(a),a._parent=this):a instanceof Behavior&&this._behaviors.push(a),a},isAutoRefreshable:function(){return this._autoRefreshable},setAutoRefreshable:function(a){this._autoRefreshable=a},autoRefreshable:function(a){return js.notDefined(a)?this.isAutoRefreshable():void this.setAutoRefreshable(a)},refresh:function(){this.setVisible(this.isVisible()),this.setX(this.getX()),this.setY(this.getY()),this.setWidth(this.getWidth()),this.setHeight(this.getHeight())},_tryAutoRefresh:function(){if(this.isAutoRefreshable()&&this.refresh(),js.notEmpty(this._children))for(var a in this._children)this._children[a]._tryAutoRefresh()}}),Behavior=Class.extend({init:function(a){this.action=a}}),WindowResize=Behavior.extend({init:function(a){this._super(a)}}),MouseDown=Behavior.extend({init:function(a){this._super(a)}}),MouseMove=Behavior.extend({init:function(a){this._super(a)}}),MouseUp=Behavior.extend({init:function(a){this._super(a)}}),MouseDrag=Behavior.extend({init:function(a){this._super(a)}}),MouseClick=Behavior.extend({init:function(a){this._super(a)}}),KeyDown=Behavior.extend({init:function(a){this._super(a)}}),KeyUp=Behavior.extend({init:function(a){this._super(a)}}),KeyPress=Behavior.extend({init:function(a){this._super(a)}}),Panel=Component.extend({init:function(a){this._super(a),this.backgroundColor("white"),this.borderColor("black"),this.borderWidth(1),this.borderStyle("solid")},backgroundColor:function(a){return js.not(a)?this._elem.style.backgroundColor:void(this._elem.style.backgroundColor=a)},borderColor:function(a){return js.notDefined(a)?this._elem.style.borderColor:void(this._elem.style.borderColor=a)},borderWidth:function(a){return js.notDefined(a)?this._elem.style.borderWidth:void(this._elem.style.borderWidth=a)},borderStyle:function(a){return js.notDefined(a)?this._elem.style.borderStyle:void(this._elem.style.borderStyle=a)}}),Button=Panel.extend({init:function(a,b){this._super(a),js.isDefined(b)&&this.add(new MouseClick(b))}}),Link=Component.extend({init:function(a,b){this._super(a),js.isDefined(b)&&this.add(new MouseClick(b))}}),View=Panel.extend({init:function(a){function b(a){this.event=a}function c(a){this.location=new Point(a.clientX,a.clientY)}function d(a){this.key=js.notDefined(a.which)?a.keyCode:a.which}this._super(a);var e=this;window.addEventListener("resize",function(a){e._resize(new b(a))}),window.addEventListener("mousemove",function(a){e._mouseMove(new c(a))}),window.addEventListener("mousedown",function(a){e._mouseDown(new c(a))}),window.addEventListener("mouseup",function(a){e._mouseUp(new c(a))}),window.addEventListener("click",function(a){e._mouseClick(new c(a))}),window.addEventListener("keydown",function(a){e._keyDown(new d(a))}),window.addEventListener("keyup",function(a){e._keyUp(new d(a))}),window.addEventListener("keypress",function(a){e._keyPress(new d(a))}),this.autoRefreshInterval(40)},setAutoRefreshInterval:function(a){this._autoRefreshIntervalId&&clearInterval(this._autoRefreshIntervalId);var b=this;this._autoRefreshIntervalId=setInterval(function(){b._tryAutoRefresh()},this._autoRefreshInterval=a)},getAutoRefreshInterval:function(){return this._autoRefreshInterval},autoRefreshInterval:function(a){return js.notDefined(a)?this.getAutoRefreshInterval():void this.setAutoRefreshInterval(a)}})}(),Absolut={run:js.run,Window:win,Class:Class,Point:Point,Component:Component,Behavior:Behavior,Panel:Panel,Button:Button,Link:Link,View:View,WindowResize:WindowResize,MouseDown:MouseDown,MouseMove:MouseMove,MouseClick:MouseClick,MouseUp:MouseUp,MouseDrag:MouseDrag,KeyDown:KeyDown,KeyUp:KeyUp,KeyPress:KeyPress}}(),"object"==typeof module&&module.exports&&(module.exports=Absolut);