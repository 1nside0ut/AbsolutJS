/*! AbsolutJS 0.1.0 */var Absolut;!function(){var js;!function(){"use strict";js={not:function(a){return!a},isDefined:function(a){return void 0!==a},notDefined:function(a){return void 0===a},typeOf:function(a){return this.isFunction(a)?a.name||Function.name:a.constructor.name||Object.name},isType:function(a,b){return a instanceof b},empty:function(a){return 0===a.length},notEmpty:function(a){return 0!==a.length},isFunction:function(a){return"function"==typeof a},run:function(a){if(js.not(js.run._waiting)&&(js.run._waiting=[]),js.isFunction(a)&&js.run._waiting.push(a),js.not(js.run._firstCalled))return window.addEventListener("load",js.run),js.run._firstCalled=!0;if(js.not(document.body))return setTimeout(js.run,1);if(js.not(js.run._running)){js.run._running=js.run._waiting,js.run._waiting=[];for(var b in js.run._running)js.run._running[b]();js.run._running=void 0,js.notEmpty(js.run._waiting)&&js.run()}}}}();var win;!function(){win={width:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},height:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},size:function(){return{width:this.getWidth(),height:this.getHeight()}}}}();var ass;!function(){ass={isTrue:function(a,b){this.isFalse(!a,b)},isFalse:function(a,b){if(a)throw new Error(b)},isType:function(a,b){js.isType(b,Array)||(b=[b]);for(var c=js.typeOf(b[0]),d=js.isType(a,b[0]),e=1;e<b.length;e++)c+=" or "+js.typeOf(b[e]),d|=js.isType(a,b[e]);this.isTrue(d,"expected "+c+", but got "+js.typeOf(a))}}}();var elem;!function(){elem={_px:function(a){return a+"px"},getX:function(a){return a.offsetLeft},setX:function(a,b){a.style.left=this._px(b)},getY:function(a){return a.offsetTop},setY:function(a,b){a.style.top=this._px(b)},getWidth:function(a){return a.offsetWidth},setWidth:function(a,b){a.style.width=this._px(b)},getHeight:function(a){return a.offsetHeight},setHeight:function(a,b){a.style.height=this._px(b)},absoluteLocation:function(a){var b=a.getBoundingClientRect();return{x:Math.abs(b.left),y:Math.abs(b.top)}}}}();var Class;!function(){var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(prop){function construct(){!initializing&&this.init&&this.init.apply(this,arguments)}var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(a,b){return function(){var c=this._super;this._super=_super[a];var d=b.apply(this,arguments);return this._super=c,d}}(name,prop[name]):prop[name];var Class;return eval("Class = function "+(prop.init&&prop.init.name?prop.init.name:"Class")+"() { construct.apply(this, arguments); };"),Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=arguments.callee,Class}}();var Point,Size;!function(){Point=Class.extend({init:function(a,b){this.x=a||0,this.y=b||0},toString:function(){return JSON.stringify(this)}}),Point.sum=function(a,b){return new Point(a.x+b.x,a.y+b.y)},Size=Class.extend({init:function(a,b){this.width=a||0,this.height=b||0},toString:function(){return JSON.stringify(this)}})}();var Component,Behavior,Panel,Button,View,MouseDown,MouseMove,MouseClick,MouseUp,MouseDrag,KeyDown,KeyUp,KeyPress;!function(){Component=Class.extend({init:function(a){ass.isType(a,HTMLElement),a.style.position="absolute",a.style.margin="0",a.style.padding="0",this._elem=a,this._visible=!0,this._location=new Point(this._getX(),this._getY()),this._size=new Size(this._getWidth(),this._getHeight()),this._mouse={},this._children=[],this._behaviors=[]},element:function(){return this._elem},_event:function(a,b){if(this._behaviors.length>0)for(var c in this._behaviors){var d=this._behaviors[c];d instanceof a&&d.action(b)}},_resize:function(a){if(this.isVisible()&&(this._event(Resize,a),this._children.length>0))for(var b in this._children)this._children[b]._resize(a)},_isPointed:function(a){var b=this.absoluteLocation(),c=b.x<=a.x&&a.x<=b.x+this._getWidth()&&b.y<=a.y&&a.y<=b.y+this._getHeight();return c},_mouseMove:function(a){if(this.isVisible()&&(this._isPointed(a.location)?(this._event(MouseMove,a),this._mouse.pressed&&(this._mouse.dragging=!0,this._event(MouseDrag,a))):this._mouse.dragging&&this._event(MouseDrag,a),this._children.length>0))for(var b in this._children)this._children[b]._mouseMove(a)},_mouseDown:function(a){if(this.isVisible()&&(this._isPointed(a.location)&&(this._mouse.pressed=!0,this._event(MouseDown,a)),this._children.length>0))for(var b in this._children)this._children[b]._mouseDown(a)},_mouseUp:function(a){if(this._releaseMouse(),this.isVisible()&&(this._isPointed(a.location)&&this._event(MouseUp,a),this._children.length>0))for(var b in this._children)this._children[b]._mouseUp(a)},_releaseMouse:function(){if(this._mouse.pressed=!1,this._mouse.dragging=!1,this._children.length>0)for(var a in this._children)this._children[a]._releaseMouse()},_mouseClick:function(a){if(this.isVisible()&&(this._isPointed(a.location)&&this._event(MouseClick,a),this._children.length>0))for(var b in this._children)this._children[b]._mouseClick(a)},_keyDown:function(a){if(this.isVisible()&&(this._event(KeyDown,a),this._children.length>0))for(var b in this._children)this._children[b]._keyDown(a)},_keyUp:function(a){if(this.isVisible()&&(this._event(KeyUp,a),this._children.length>0))for(var b in this._children)this._children[b]._keyUp(a)},_keyPress:function(a){if(this.isVisible()&&(this._event(KeyPress,a),this._children.length>0))for(var b in this._children)this._children[b]._keyPress(a)},toString:function(){return this._elem.toString()},_getWidth:function(){return elem.getWidth(this._elem)},_setWidth:function(a){elem.setWidth(this._elem,a)},width:function(a){return js.notDefined(a)?this.getWidth():void this.setWidth(a)},getWidth:function(){return this._size.width||this._getWidth()},setWidth:function(a){this._size.width=a,this._setWidth(a)},_getHeight:function(){return elem.getHeight(this._elem)},_setHeight:function(a){elem.setHeight(this._elem,a)},height:function(a){return js.notDefined(a)?this.getHeight():void this.setHeight(a)},getHeight:function(){return this._size.height||this._getHeight()},setHeight:function(a){this._size.height=a,this._setHeight(a)},size:function(){return js.empty(arguments)?this.getSize():void this.setSize.apply(this,arguments)},getSize:function(){return new Size(this.getWidth(),this.getHeight())},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},parent:function(){return this._parent},children:function(){return this._children},add:function(a){return ass.isType(a,[Component,Behavior]),a instanceof Component?(this._children.push(a),a._parent=this):a instanceof Behavior&&this._behaviors.push(a),a},visible:function(a){return js.notDefined(a)?this.isVisible():void this.setVisible(a)},isVisible:function(){return"hidden"!==this._elem.style.visibility},setVisible:function(a){this._elem.style.visibility=a?"visible":"hidden"},location:function(){return js.empty(arguments)?this.getLocation():void this.setLocation.apply(this,arguments)},getLocation:function(){return new Point(this.getX(),this.getY())},setLocation:function(){switch(arguments.length){case 1:var a=arguments[0];this.setX(a.x),this.setY(a.y);break;case 2:this.setX(arguments[0]),this.setY(arguments[1])}},_getX:function(){return elem.getX(this._elem)},_setX:function(a){elem.setX(this._elem,a)},x:function(a){return js.notDefined(a)?this.getX():void this.setX(a)},getX:function(){return this._location.x||this._getX()},setX:function(a){this._location.x=a,this._setX(a)},_getY:function(){return elem.getY(this._elem)},_setY:function(a){elem.setY(this._elem,a)},y:function(a){return js.notDefined(a)?this.getY():void this.setY(a)},getY:function(){return this._location.y||this._getY()},setY:function(a){this._location.y=a,this._setY(a)},absoluteLocation:function(){return elem.absoluteLocation(this._elem)}}),Behavior=Class.extend({init:function(a){this.action=a}}),Resize=Behavior.extend({init:function(a){this._super(a)}}),MouseDown=Behavior.extend({init:function(a){this._super(a)}}),MouseMove=Behavior.extend({init:function(a){this._super(a)}}),MouseUp=Behavior.extend({init:function(a){this._super(a)}}),MouseDrag=Behavior.extend({init:function(a){this._super(a)}}),MouseClick=Behavior.extend({init:function(a){this._super(a)}}),KeyDown=Behavior.extend({init:function(a){this._super(a)}}),KeyUp=Behavior.extend({init:function(a){this._super(a)}}),KeyPress=Behavior.extend({init:function(a){this._super(a)}}),Border=Component.extend({init:function(a){this._super(a),this._color="transparent",this._borderColor="magenta",this._borderWidth=1},color:function(a){return js.not(a)?this._color:void(this._elem.style.backgroundColor=this._color=a)},borderColor:function(a){return js.not(a)?this._borderColor:void(this._elem.style.borderColor=this._borderColor=a)},borderWidth:function(a){return js.not(a)?this._borderWidth:void(this._elem.style.borderWidth=(this._borderWidth=a)+"px")}}),Panel=Border.extend({init:function(a){this._super(a)}}),Button=Border.extend({init:function(a,b){this._super(a),js.isDefined(b)&&this.add(new MouseClick(b))}}),Link=Component.extend({init:function(a,b){this._super(a),js.isDefined(b)&&this.add(new MouseClick(b))}}),View=Panel.extend({init:function(a){function b(a){this.event=a}function c(a){this.location=new Point(a.clientX,a.clientY)}function d(a){this.key=a.which||a.keyCode}this._super(a);var e=this;window.addEventListener("resize",function(a){e._resize(new b(a))}),window.addEventListener("mousemove",function(a){e._mouseMove(new c(a))}),window.addEventListener("mousedown",function(a){e._mouseDown(new c(a))}),window.addEventListener("mouseup",function(a){e._mouseUp(new c(a))}),window.addEventListener("click",function(a){e._mouseClick(new c(a))}),window.addEventListener("keydown",function(a){e._keyDown(new d(a))}),window.addEventListener("keyup",function(a){e._keyUp(new d(a))}),window.addEventListener("keypress",function(a){e._keyPress(new d(a))}),setInterval(function(){e.refresh()},100)},refresh:function(){}})}(),Absolut={run:js.run,window:win,Class:Class,Point:Point,Component:Component,Behavior:Behavior,Border:Border,Panel:Panel,Button:Button,Link:Link,View:View,Resize:Resize,MouseDown:MouseDown,MouseMove:MouseMove,MouseClick:MouseClick,MouseUp:MouseUp,MouseDrag:MouseDrag,KeyDown:KeyDown,KeyUp:KeyUp,KeyPress:KeyPress}}(),"object"==typeof module&&module.exports&&(module.exports=Absolut);