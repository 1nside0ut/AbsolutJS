/*! AbsolutJS 0.1.0 */var Absolut;!function(){var js;!function(){"use strict";js={not:function(a){return!a},notDefined:function(a){return void 0===a},typeOf:function(a){return this.isFunction(a)?a.name||Function.name:a.constructor.name||Object.name},isType:function(a,b){return a instanceof b},empty:function(a){return 0===a.length},notEmpty:function(a){return 0!==a.length},isFunction:function(a){return"function"==typeof a},run:function(a){if(js.not(js.run._waiting)&&(js.run._waiting=[]),js.isFunction(a)&&js.run._waiting.push(a),js.not(js.run._firstCalled))return window.addEventListener("load",js.run),js.run._firstCalled=!0;if(js.not(document.body))return setTimeout(js.run,1);if(js.not(js.run._running)){js.run._running=js.run._waiting,js.run._waiting=[];for(var b in js.run._running)js.run._running[b]();js.run._running=void 0,js.notEmpty(js.run._waiting)&&js.run()}}}}();var win;!function(){win={width:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},height:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},size:function(){return{width:this.width(),height:this.height()}}}}();var assert;!function(){assert={isTrue:function(a,b){this.isFalse(!a,b)},isFalse:function(a,b){if(a)throw new Error(b)},isType:function(a,b){js.isType(b,Array)||(b=[b]);for(var c=js.typeOf(b[0]),d=js.isType(a,b[0]),e=1;e<b.length;e++)c+=" or "+js.typeOf(b[e]),d|=js.isType(a,b[e]);this.isTrue(d,"expected "+c+", but got "+js.typeOf(a))}}}();var elem;!function(){elem={absoluteLocation:function(a){var b=a.getBoundingClientRect();return{x:Math.abs(b.left),y:Math.abs(b.top)}}}}();var Class;!function(){var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(prop){function construct(){!initializing&&this.init&&this.init.apply(this,arguments)}var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(a,b){return function(){var c=this._super;this._super=_super[a];var d=b.apply(this,arguments);return this._super=c,d}}(name,prop[name]):prop[name];var Class;return eval("Class = function "+(prop.init&&prop.init.name?prop.init.name:"Class")+"() { construct.apply(this, arguments); };"),Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=arguments.callee,Class}}();var Point,Size;!function(){Point=Class.extend({init:function(a,b){this.x=a||0,this.y=b||0},toString:function(){return JSON.stringify(this)}}),Point.sum=function(a,b){return new Point(a.x+b.x,a.y+b.y)},Size=Class.extend({init:function(a,b){this.width=a||0,this.height=b||0},toString:function(){return JSON.stringify(this)}})}();var Component,Behavior,Panel,View,MouseDown,MouseMove,MouseClick,MouseUp,MouseDrag,KeyDown,KeyUp,KeyPress;!function(){Component=Class.extend({init:function(a){assert.isType(a,HTMLElement),a.style.position="absolute",a.style.margin="0",a.style.padding="0",this._elem=a,this._mouse={},this._children=[],this._behaviors=[],this._prevDisplay=""},element:function(){return this._elem},_isPointed:function(a){var b=this.absoluteLocation(),c=b.x<=a.x&&a.x<=b.x+this._elem.offsetWidth&&b.y<=a.y&&a.y<=b.y+this._elem.offsetHeight;return c},_mouseEvent:function(a,b){if(this._behaviors.length>0)for(var c in this._behaviors){var d=this._behaviors[c];d instanceof a&&d.action(b)}},_mouseMove:function(a){if(this.visible()&&(this._isPointed(a.location)?(this._mouseEvent(MouseMove,a),this._mouse.pressed&&(this._mouse.dragging=!0,this._mouseEvent(MouseDrag,a))):this._mouse.dragging&&this._mouseEvent(MouseDrag,a),this._children.length>0))for(var b in this._children)this._children[b]._mouseMove(a)},_mouseDown:function(a){if(this.visible()&&(this._isPointed(a.location)&&(this._mouse.pressed=!0,this._mouseEvent(MouseDown,a)),this._children.length>0))for(var b in this._children)this._children[b]._mouseDown(a)},_mouseUp:function(a){if(this._releaseMouse(),this.visible()&&(this._isPointed(a.location)&&this._mouseEvent(MouseUp,a),this._children.length>0))for(var b in this._children)this._children[b]._mouseUp(a)},_releaseMouse:function(){if(this._mouse.pressed=!1,this._mouse.dragging=!1,this._children.length>0)for(var a in this._children)this._children[a]._releaseMouse()},_mouseClick:function(a){if(this.visible()&&(this._isPointed(a.location)&&this._mouseEvent(MouseClick,a),this._children.length>0))for(var b in this._children)this._children[b]._mouseClick(a)},_keyEvent:function(a,b){if(this._behaviors.length>0)for(var c in this._behaviors){var d=this._behaviors[c];d instanceof a&&d.action(b)}},_keyDown:function(a){if(this.visible()&&(this._keyEvent(KeyDown,a),this._children.length>0))for(var b in this._children)this._children[b]._keyDown(a)},_keyUp:function(a){if(this.visible()&&(this._keyEvent(KeyUp,a),this._children.length>0))for(var b in this._children)this._children[b]._keyUp(a)},_keyPress:function(a){if(this.visible()&&(this._keyEvent(KeyPress,a),this._children.length>0))for(var b in this._children)this._children[b]._keyPress(a)},toString:function(){return this._elem.toString()},_px:function(a){return a+"px"},width:function(a){return js.notDefined(a)?this._elem.offsetWidth:void(this._elem.style.width=this._px(a))},height:function(a){return js.notDefined(a)?this._elem.offsetHeight:void(this._elem.style.height=this._px(a))},size:function(a,b){return js.empty(arguments)?new Size(this._elem.offsetWidth,this._elem.offsetHeight):(this.width(a),void this.height(b))},parent:function(){return this._parent},children:function(){return this._children},add:function(a){return assert.isType(a,[Component,Behavior]),a instanceof Component?(this._children.push(a),a._parent=this):a instanceof Behavior&&this._behaviors.push(a),a},visible:function(a){if(void 0===a)return"none"!==this._elem.style.display;var b=this._elem.style;"none"!==b.display&&(this._prevDisplay=b.display),a?this._prevDisplay&&"none"!==this._prevDisplay?b.display=this._prevDisplay:b.display="block":(b.display&&"none"!==b.display&&(this._prevDisplay=b.display),b.display="none")},location:function(){switch(arguments.length){case 0:return new Point(this._elem.offsetLeft,this._elem.offsetTop);case 1:var a=arguments[0];this._elem.style.left=this._px(a.x),this._elem.style.top=this._px(a.y);break;case 2:this._elem.style.left=this._px(arguments[0]),this._elem.style.top=this._px(arguments[1])}},absoluteLocation:function(){return elem.absoluteLocation(this._elem)}}),Behavior=Class.extend({init:function(a){this.action=a}}),MouseDown=Behavior.extend({init:function(a){this._super(a)}}),MouseMove=Behavior.extend({init:function(a){this._super(a)}}),MouseUp=Behavior.extend({init:function(a){this._super(a)}}),MouseDrag=Behavior.extend({init:function(a){this._super(a)}}),MouseClick=Behavior.extend({init:function(a){this._super(a)}}),KeyDown=Behavior.extend({init:function(a){this._super(a)}}),KeyUp=Behavior.extend({init:function(a){this._super(a)}}),KeyPress=Behavior.extend({init:function(a){this._super(a)}}),Border=Component.extend({init:function(a){this._super(a),this._color="transparent",this._borderColor="magenta",this._borderWidth=1},color:function(a){return js.not(a)?this._color:void(this._elem.style.backgroundColor=this._color=a)},borderColor:function(a){return js.not(a)?this._borderColor:void(this._elem.style.borderColor=this._borderColor=a)},borderWidth:function(a){return js.not(a)?this._borderWidth:void(this._elem.style.borderWidth=(this._borderWidth=a)+"px")}}),Panel=Border.extend({init:function(a){this._super(a)}}),Link=Component.extend({init:function(a,b){this._super(a),this.add(new MouseDown(b))}}),View=Panel.extend({init:function(a){function b(a){this.location=new Point(a.clientX,a.clientY)}function c(a){this.key=a.which||a.keyCode}this._super(a);var d=this;window.addEventListener("mousemove",function(a){d._mouseMove(new b(a))}),window.addEventListener("mousedown",function(a){d._mouseDown(new b(a))}),window.addEventListener("mouseup",function(a){d._mouseUp(new b(a))}),window.addEventListener("click",function(a){d._mouseClick(new b(a))}),window.addEventListener("keydown",function(a){d._keyDown(new c(a))}),window.addEventListener("keyup",function(a){d._keyUp(new c(a))}),window.addEventListener("keypress",function(a){d._keyPress(new c(a))})}})}(),Absolut={run:js.run,window:win,Class:Class,Point:Point,Component:Component,Behavior:Behavior,Border:Border,Panel:Panel,Link:Link,View:View,MouseDown:MouseDown,MouseMove:MouseMove,MouseClick:MouseClick,MouseUp:MouseUp,MouseDrag:MouseDrag,KeyDown:KeyDown,KeyUp:KeyUp,KeyPress:KeyPress}}(),"undefined"!=typeof module&&(module.exports=Absolut);